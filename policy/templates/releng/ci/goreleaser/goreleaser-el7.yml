# Generated by: gromit policy
# Generated on: {{ .Timestamp }}

# Check the documentation at http://goreleaser.com
# This project needs CGO_ENABLED=1 and the cross-compiler toolchains for
# - arm64
# - amd64
{{- /* Generate this only if cgo is enabled. */ -}}
{{- if .Branchvals.Cgo }}

  {{- template "before_hooks" . }}

  {{- template "cgo_builds" . }}

  {{- template "nfpm" . }}

  {{- template "publishers" . }}

# This disables archives
archives:
  - format: binary
    allow_different_binary_count: true
  {{- if eq .Name "tyk" }}
dockers:
    {{- template "plugin-compiler" . }}
  {{- end }}

checksum:
  disable: true

release:
  disable: true
  github:
    owner: TykTechnologies
    name: {{ .Name }}
  prerelease: auto
  draft: true
  name_template: "{{ `{{.ProjectName}}-v{{.Version}}` }}"

{{- end }}
