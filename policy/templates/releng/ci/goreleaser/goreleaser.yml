# Generated by: gromit policy

# Check the documentation at http://goreleaser.com
# This project needs CGO_ENABLED=1 and the cross-compiler toolchains for
# - arm64
# - amd64

{{- if eq .Name "portal"}}
before:
  hooks:
    - go mod tidy
    - ./ci/copy-framework-files.sh
{{- end}}

{{- if .Branchvals.Cgo }}
{{- template "cgo_builds" . }}
{{- else }}
{{- template "builds" . }}
{{- end }}

{{- template "nfpm" . }}

{{- template "publishers" . }}

# This disables archives
archives:
  - format: binary
    allow_different_binary_count: true

checksum:
  disable: true

release:
  disable: true
  github:
    owner: TykTechnologies
    name: {{ .Name }}
  prerelease: auto
  draft: true
  name_template: "{{ `{{.ProjectName}}-v{{.Version}}` }}"
