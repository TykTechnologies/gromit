# Generated by: gromit policy

# Full test suite for changes in api-tests

name: Changes in API Tests

on:
  push:
    paths:
      - tests/**

jobs:
  api-tests:
    needs: goreleaser
    runs-on: ubuntu-latest
    permissions:
      id-token: write   # This is required for requesting the JWT
      contents: read    # This is required for actions/checkout
    env:
      METADATA_REPORT_PATH: /tmp/metadata.toml
      XUNIT_REPORT_PATH: {{`${{ github.workspace }}`}}/reports/pytest-report.xml      
    strategy:
      fail-fast: false
      matrix:
        conf: [ "sha256", "murmur64" ]
        db: [ "mongo7", "postgres15" ]
        include:
          - db: postgres15
            markers: "and not sql"
